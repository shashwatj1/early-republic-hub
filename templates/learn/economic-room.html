{% extends "base.html" %}

{% block title %}Economic Policy Room - Early Republic Hub{% endblock %}

{% block content %}
<section class="py-5">
    <div class="container">
        <!-- Room Header -->
        <div class="room-header text-center mb-5">
            <div class="room-icon-large">üí∞</div>
            <h1 class="display-3 fw-bold" style="font-family: var(--font-display); color: var(--sepia);">
                ECONOMIC POLICY ROOM
            </h1>
            <p class="lead">Explore tariffs, taxes, and the American System</p>
            <div class="breadcrumb-nav">
                <a href="/">Home</a> ‚Üí <a href="/learn">Learn</a> ‚Üí Economic Policy
            </div>
        </div>

        <!-- Terms in This Room -->
        <div class="alert alert-info mb-5">
            <h4>üìã Terms You'll Learn:</h4>
            <div class="d-flex flex-wrap gap-2">
                <span class="badge bg-primary">Tariff</span>
                <span class="badge bg-primary">Internal Taxes (Whiskey Tax)</span>
                <span class="badge bg-primary">American System</span>
            </div>
        </div>

        <!-- Interactive Module 1: Tariff Slider -->
        <div class="learning-module mb-5">
            <h2 class="module-title">üéöÔ∏è Interactive Tariff Simulator</h2>
            
            <div class="row">
                <div class="col-lg-8">
                    <div class="simulator-box">
                        <h4>Adjust the Tariff Rate</h4>
                        <p class="text-muted">See how different parties reacted to tariff levels</p>
                        
                        <div class="tariff-controls mt-4">
                            <label class="form-label fw-bold">Tariff Rate: <span id="tariffRate">20</span>%</label>
                            <input type="range" class="form-range" id="tariffSlider" min="0" max="50" value="20" step="5">
                            <div class="d-flex justify-content-between small text-muted">
                                <span>0% (Free Trade)</span>
                                <span>25% (Moderate)</span>
                                <span>50% (Protective)</span>
                            </div>
                        </div>

                        <!-- Reactions Display -->
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <div class="reaction-box federalist-reaction">
                                    <h5>üîµ Federalist Reaction</h5>
                                    <p id="federalistReaction"></p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="reaction-box democratic-reaction">
                                    <h5>üî¥ Democratic-Republican Reaction</h5>
                                    <p id="democraticReaction"></p>
                                </div>
                            </div>
                        </div>

                        <!-- Economic Impact -->
                        <div class="impact-display mt-4">
                            <h5>üìä Economic Impact:</h5>
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <div class="stat-card">
                                        <div class="stat-label">Northern Manufacturing</div>
                                        <div class="stat-value" id="manufacturingStat">üìà</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="stat-card">
                                        <div class="stat-label">Southern Agriculture</div>
                                        <div class="stat-value" id="agricultureStat">üìâ</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="stat-card">
                                        <div class="stat-label">Import Prices</div>
                                        <div class="stat-value" id="pricesStat">üí∞</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="info-card">
                        <h4>üìö What is a Tariff?</h4>
                        <p><strong>Definition:</strong> A tax on imported goods</p>
                        <p><strong>Purpose:</strong> Protect American industries and raise revenue</p>
                        
                        <h5 class="mt-3">Party Positions:</h5>
                        <ul>
                            <li><strong>Federalists:</strong> ‚úÖ Strongly supported high tariffs to protect Northern manufacturing</li>
                            <li><strong>Democratic-Republicans:</strong> ‚ùå Generally opposed - hurt farmers who needed cheap imported tools</li>
                        </ul>
                        
                        <h5 class="mt-3">Historical Context:</h5>
                        <p class="small">Tariffs were a major source of conflict between the industrial North and agricultural South. This debate would continue for decades!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Module 2: Whiskey Tax Calculator -->
        <div class="learning-module mb-5">
            <h2 class="module-title">ü•É Whiskey Tax Calculator</h2>
            
            <div class="row">
                <div class="col-lg-8">
                    <div class="simulator-box">
                        <h4>Calculate Your Tax Burden</h4>
                        <p class="text-muted">You're a frontier farmer in 1791. Let's see how the whiskey tax affects you!</p>
                        
                        <div class="calculator-form mt-4">
                            <div class="mb-3">
                                <label class="form-label">How many gallons of whiskey do you produce per year?</label>
                                <input type="number" class="form-control form-control-lg" id="whiskeyGallons" value="100" min="0" max="1000">
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Tax rate: $0.09 per gallon (set by Hamilton's policy)</label>
                            </div>
                            
                            <button class="btn btn-custom btn-lg" onclick="calculateWhiskeyTax()">Calculate Tax</button>
                        </div>

                        <div id="taxResults" class="tax-results mt-4" style="display: none;">
                            <h5>üí∏ Your Tax Bill:</h5>
                            <div class="tax-amount" id="taxAmount"></div>
                            
                            <div class="tax-context mt-3">
                                <p id="taxContext"></p>
                            </div>
                            
                            <div class="rebellion-info mt-3 p-3 bg-danger text-white rounded">
                                <h5>‚öîÔ∏è Rebel?</h5>
                                <p class="mb-2">Many frontier farmers were so angry about this tax that they started the <strong>Whiskey Rebellion (1794)</strong>!</p>
                                <button class="btn btn-light btn-sm" onclick="showRebellionInfo()">Learn About the Rebellion</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="info-card">
                        <h4>üìö Internal Taxes / Whiskey Tax</h4>
                        <p><strong>Year:</strong> 1791</p>
                        <p><strong>Who proposed it:</strong> Alexander Hamilton (Federalist)</p>
                        
                        <h5 class="mt-3">Why Tax Whiskey?</h5>
                        <ul class="small">
                            <li>Federal government needed revenue</li>
                            <li>Pay off war debts</li>
                            <li>Show federal authority</li>
                        </ul>
                        
                        <h5 class="mt-3">Why Farmers Hated It:</h5>
                        <ul class="small">
                            <li>Whiskey was their cash crop (easier to transport than grain)</li>
                            <li>Tax hit them harder than wealthy people</li>
                            <li>Reminded them of British taxation</li>
                        </ul>
                        
                        <div class="alert alert-warning mt-3">
                            <strong>Result:</strong> Whiskey Rebellion (1794) - Washington sent 13,000 troops to enforce the tax. This showed the federal government could enforce its laws!
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Module 3: American System Builder -->
        <div class="learning-module mb-5">
            <h2 class="module-title">üèóÔ∏è American System Builder</h2>
            
            <div class="row">
                <div class="col-lg-8">
                    <div class="simulator-box">
                        <h4>Build Henry Clay's Economic Vision</h4>
                        <p class="text-muted">Drag the puzzle pieces to assemble the American System</p>
                        
                        <!-- Puzzle Area -->
                        <div class="puzzle-area" id="puzzleArea">
                            <div class="puzzle-outline">
                                <div class="puzzle-slot" data-piece="bank">
                                    <div class="slot-label">1. National Bank</div>
                                    <div class="slot-placeholder">Drag here</div>
                                </div>
                                <div class="puzzle-slot" data-piece="tariff">
                                    <div class="slot-label">2. Protective Tariffs</div>
                                    <div class="slot-placeholder">Drag here</div>
                                </div>
                                <div class="puzzle-slot" data-piece="roads">
                                    <div class="slot-label">3. Internal Improvements</div>
                                    <div class="slot-placeholder">Drag here</div>
                                </div>
                            </div>
                        </div>

                        <!-- Puzzle Pieces -->
                        <div class="puzzle-pieces mt-4">
                            <h5>Available Pieces:</h5>
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <div class="puzzle-piece" draggable="true" data-piece="bank">
                                        <div class="piece-icon">üè¶</div>
                                        <div class="piece-text">National Bank to provide credit and currency</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="puzzle-piece" draggable="true" data-piece="tariff">
                                        <div class="piece-icon">üí∞</div>
                                        <div class="piece-text">High tariffs to protect American industry</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="puzzle-piece" draggable="true" data-piece="roads">
                                        <div class="piece-icon">üõ£Ô∏è</div>
                                        <div class="piece-text">Federal funding for roads and canals</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <button class="btn btn-success btn-lg" onclick="checkAmericanSystem()">Check My System</button>
                        </div>

                        <div id="systemResults" class="mt-4" style="display: none;"></div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="info-card">
                        <h4>üìö American System</h4>
                        <p><strong>Proposed by:</strong> Henry Clay & John C. Calhoun</p>
                        <p><strong>Era:</strong> 1810s-1820s (after War of 1812)</p>
                        
                        <h5 class="mt-3">Goal:</h5>
                        <p class="small">Make America economically independent and unite the nation through infrastructure</p>
                        
                        <h5 class="mt-3">Three Parts:</h5>
                        <ol class="small">
                            <li><strong>National Bank:</strong> Provide stable currency and credit</li>
                            <li><strong>Protective Tariffs:</strong> Help American businesses compete</li>
                            <li><strong>Internal Improvements:</strong> Roads/canals to connect regions</li>
                        </ol>
                        
                        <h5 class="mt-3">The Irony:</h5>
                        <p class="small">Democratic-Republicans like Clay supported this - but it used <em>Federalist</em> ideas about federal power! Shows how D-Rs evolved after War of 1812.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summary & Navigation -->
        <div class="room-summary">
            <h3>üéØ Economic Policy Summary</h3>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="summary-point">
                        <h5>üí∞ Tariff</h5>
                        <p>Tax on imports. Federalists loved it (protect manufacturing), D-Rs hated it (hurt farmers).</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="summary-point">
                        <h5>ü•É Whiskey Tax</h5>
                        <p>Internal tax that sparked rebellion (1794). Showed federal government could enforce laws.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="summary-point">
                        <h5>üèóÔ∏è American System</h5>
                        <p>Post-1815 plan combining bank, tariffs, and infrastructure. D-Rs adopting Federalist ideas!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="room-navigation mt-5">
            <a href="/learn" class="btn btn-outline-secondary btn-lg">‚Üê Back to Learn</a>
            <a href="/learn/federal" class="btn btn-custom btn-lg">Next Room: Federal Power ‚Üí</a>
        </div>
    </div>
</section>

<style>
.room-header {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    padding: 3rem 2rem;
    border-radius: 20px;
    margin-bottom: 2rem;
}

.room-icon-large {
    font-size: 5rem;
    margin-bottom: 1rem;
}

.breadcrumb-nav {
    margin-top: 1rem;
    font-size: 0.9rem;
}

.breadcrumb-nav a {
    color: white;
    text-decoration: underline;
}

.learning-module {
    background: white;
    border: 3px solid var(--sepia);
    border-radius: 15px;
    padding: 2rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.module-title {
    font-family: var(--font-display);
    color: var(--sepia);
    border-bottom: 3px solid #f59e0b;
    padding-bottom: 1rem;
    margin-bottom: 2rem;
}

.simulator-box {
    background: #f8f9fa;
    border-radius: 10px;
    padding: 2rem;
}

.reaction-box {
    padding: 1.5rem;
    border-radius: 10px;
    min-height: 150px;
}

.federalist-reaction {
    background: linear-gradient(135deg, #dbeafe, #bfdbfe);
    border: 2px solid var(--federalist-primary);
}

.democratic-reaction {
    background: linear-gradient(135deg, #fee2e2, #fecaca);
    border: 2px solid var(--democratic-primary);
}

.impact-display {
    background: white;
    padding: 1.5rem;
    border-radius: 10px;
    border: 2px solid #e5e7eb;
}

.stat-card {
    background: white;
    border: 2px solid var(--sepia);
    border-radius: 10px;
    padding: 1rem;
    text-align: center;
}

.stat-label {
    font-size: 0.9rem;
    color: #6b7280;
    margin-bottom: 0.5rem;
}

.stat-value {
    font-size: 2rem;
}

.info-card {
    background: #fffbeb;
    border: 3px solid #f59e0b;
    border-radius: 15px;
    padding: 1.5rem;
    height: 100%;
}

.tax-results {
    background: white;
    padding: 2rem;
    border-radius: 10px;
    border: 3px solid #10b981;
}

.tax-amount {
    font-size: 3rem;
    font-weight: 900;
    color: #dc2626;
    text-align: center;
    padding: 1rem;
    background: #fee2e2;
    border-radius: 10px;
}

.puzzle-area {
    background: white;
    padding: 2rem;
    border-radius: 10px;
    border: 3px dashed var(--sepia);
    min-height: 300px;
}

.puzzle-outline {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.puzzle-slot {
    border: 3px dashed #cbd5e1;
    border-radius: 10px;
    padding: 1.5rem;
    min-height: 100px;
    background: #f8f9fa;
    transition: all 0.3s ease;
}

.puzzle-slot.filled {
    background: #d1fae5;
    border-color: #10b981;
    border-style: solid;
}

.slot-label {
    font-weight: 700;
    color: var(--sepia);
    margin-bottom: 0.5rem;
}

.slot-placeholder {
    color: #9ca3af;
    font-style: italic;
}

.puzzle-piece {
    background: white;
    border: 3px solid #f59e0b;
    border-radius: 10px;
    padding: 1rem;
    cursor: move;
    transition: all 0.3s ease;
    text-align: center;
}

.puzzle-piece:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 16px rgba(0,0,0,0.2);
}

.puzzle-piece.placed {
    opacity: 0.3;
    cursor: not-allowed;
}

.piece-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

.piece-text {
    font-size: 0.9rem;
    font-weight: 600;
}

.room-summary {
    background: linear-gradient(135deg, #fef3c7, #fde68a);
    border: 3px solid #f59e0b;
    border-radius: 15px;
    padding: 2rem;
}

.summary-point {
    background: white;
    border-radius: 10px;
    padding: 1.5rem;
    height: 100%;
    border: 2px solid var(--sepia);
}

.room-navigation {
    display: flex;
    justify-content: space-between;
    gap: 1rem;
}
</style>

{% block extra_js %}
<script src="{{ url_for('static', filename='js/economic-room.js') }}"></script>
{% endblock %}

{% endblock %}
