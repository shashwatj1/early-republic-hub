{% extends "base.html" %}

{% block title %}Historical Thinking Skills - Early Republic Hub{% endblock %}

{% block content %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h1 class="display-3 fw-bold" style="font-family: var(--font-display); color: var(--sepia);">
                üß† HISTORICAL THINKING SKILLS
            </h1>
            <p class="lead">Apply critical thinking to understand the Early Republic</p>
            <p class="text-muted">Four interactive tools to analyze history like a scholar</p>
        </div>

        <!-- Skills Navigation -->
        <div class="row g-4 mb-5">
            <div class="col-md-6 col-lg-3">
                <a href="#change-continuity" class="skill-nav-card">
                    <div class="skill-icon">üîÑ</div>
                    <h4>Change & Continuity</h4>
                    <p class="small">What changed? What stayed the same?</p>
                </a>
            </div>
            <div class="col-md-6 col-lg-3">
                <a href="#cause-effect" class="skill-nav-card">
                    <div class="skill-icon">‚õìÔ∏è</div>
                    <h4>Cause & Effect</h4>
                    <p class="small">How did events lead to each other?</p>
                </a>
            </div>
            <div class="col-md-6 col-lg-3">
                <a href="#compare-contrast" class="skill-nav-card">
                    <div class="skill-icon">‚öñÔ∏è</div>
                    <h4>Compare & Contrast</h4>
                    <p class="small">Federalists vs Democratic-Republicans</p>
                </a>
            </div>
            <div class="col-md-6 col-lg-3">
                <a href="#contextualization" class="skill-nav-card">
                    <div class="skill-icon">üåç</div>
                    <h4>Contextualization</h4>
                    <p class="small">America in the world context</p>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Skill 1: Change & Continuity -->
<section id="change-continuity" class="py-5">
    <div class="container">
        <div class="skill-header">
            <h2>üîÑ Change & Continuity Analysis</h2>
            <p class="lead">What changed between 1790-1825? What stayed the same?</p>
        </div>

        <div class="interactive-module">
            <h3 class="text-center mb-4">Interactive Time Slider</h3>
            
            <!-- Year Slider -->
            <div class="year-slider-container">
                <label for="yearSlider" class="form-label">Drag to explore different years:</label>
                <input type="range" class="form-range" id="yearSlider" min="1790" max="1825" value="1790" step="1">
                <div class="d-flex justify-content-between">
                    <span>1790</span>
                    <span id="currentYear" class="fw-bold fs-4" style="color: #d4af37;">1790</span>
                    <span>1825</span>
                </div>
            </div>

            <!-- Display Area -->
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="change-box changed">
                        <h4>‚ú® CHANGED</h4>
                        <ul id="changedList"></ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="change-box continued">
                        <h4>‚û°Ô∏è CONTINUED</h4>
                        <ul id="continuedList"></ul>
                    </div>
                </div>
            </div>

            <!-- Analysis Box -->
            <div class="analysis-box mt-4">
                <h4>üìä Analysis:</h4>
                <p id="changeAnalysis"></p>
            </div>
        </div>
    </div>
</section>

<!-- Skill 2: Cause & Effect -->
<section id="cause-effect" class="py-5 bg-light">
    <div class="container">
        <div class="skill-header">
            <h2>‚õìÔ∏è Cause & Effect Chain Builder</h2>
            <p class="lead">Build domino chains showing how one event led to another</p>
        </div>

        <div class="interactive-module">
            <h3 class="text-center mb-4">Build a Historical Chain Reaction</h3>
            
            <!-- Instructions -->
            <div class="alert alert-info">
                <strong>How it works:</strong> Click on events below to add them to your chain. Events will light up green if they correctly follow the previous event!
            </div>

            <!-- Chain Display -->
            <div class="chain-display" id="chainDisplay">
                <div class="chain-start">START: British Impressment of American Sailors</div>
            </div>

            <!-- Available Events -->
            <div class="event-bank">
                <h4 class="mb-3">Available Events (Click to add to chain):</h4>
                <div class="row g-2" id="eventBank"></div>
            </div>

            <!-- Reset Button -->
            <div class="text-center mt-3">
                <button class="btn btn-warning" onclick="resetChain()">Reset Chain</button>
                <button class="btn btn-success" onclick="showChainAnalysis()">Analyze My Chain</button>
            </div>

            <!-- Results -->
            <div id="chainResults" class="analysis-box mt-4" style="display: none;"></div>
        </div>
    </div>
</section>

<!-- Skill 3: Compare & Contrast -->
<section id="compare-contrast" class="py-5">
    <div class="container">
        <div class="skill-header">
            <h2>‚öñÔ∏è Compare & Contrast: Political Parties</h2>
            <p class="lead">Drag terms to see where Federalists and Democratic-Republicans agreed and disagreed</p>
        </div>

        <div class="interactive-module">
            <h3 class="text-center mb-4">Interactive Venn Diagram</h3>
            
            <!-- Venn Diagram -->
            <div class="venn-container">
                <div class="venn-circle federalist-circle">
                    <h4>FEDERALISTS</h4>
                    <div id="federalistZone" class="drop-zone"></div>
                </div>
                
                <div class="venn-overlap">
                    <h4>BOTH PARTIES</h4>
                    <div id="bothZone" class="drop-zone"></div>
                </div>
                
                <div class="venn-circle democratic-circle">
                    <h4>DEMOCRATIC-REPUBLICANS</h4>
                    <div id="democraticZone" class="drop-zone"></div>
                </div>
            </div>

            <!-- Term Cards -->
            <div class="term-cards-container mt-4">
                <h4 class="mb-3">Drag these issues to the correct zone:</h4>
                <div class="row g-2" id="termCards"></div>
            </div>

            <!-- Check Answers Button -->
            <div class="text-center mt-3">
                <button class="btn btn-primary" onclick="checkVennAnswers()">Check My Answers</button>
                <button class="btn btn-secondary" onclick="resetVenn()">Reset</button>
            </div>

            <!-- Results -->
            <div id="vennResults" class="analysis-box mt-4" style="display: none;"></div>
        </div>
    </div>
</section>

<!-- Skill 4: Contextualization -->
<section id="contextualization" class="py-5 bg-light">
    <div class="container">
        <div class="skill-header">
            <h2>üåç Contextualization: America in the World</h2>
            <p class="lead">See how American events fit into the broader context of world history</p>
        </div>

        <div class="interactive-module">
            <h3 class="text-center mb-4">Dual Timeline Explorer</h3>
            
            <!-- Timeline -->
            <div class="dual-timeline">
                <div class="timeline-row american-timeline">
                    <h4>üá∫üá∏ AMERICAN EVENTS</h4>
                    <div class="timeline-events" id="americanEvents"></div>
                </div>
                
                <div class="timeline-connector"></div>
                
                <div class="timeline-row world-timeline">
                    <h4>üåç WORLD EVENTS</h4>
                    <div class="timeline-events" id="worldEvents"></div>
                </div>
            </div>

            <!-- Connection Drawer -->
            <div class="connection-activity mt-4">
                <h4>Draw Connections:</h4>
                <p>Click an American event, then click a World event to draw a connection and explain the relationship.</p>
                
                <div id="connectionsList" class="mt-3"></div>
            </div>

            <!-- Analysis -->
            <div class="analysis-box mt-4">
                <h4>üîç Why Contextualization Matters:</h4>
                <p>Understanding the global context helps explain WHY America made certain choices. For example:</p>
                <ul id="contextExamples"></ul>
            </div>
        </div>
    </div>
</section>

<!-- Summary Section -->
<section class="py-5">
    <div class="container">
        <div class="summary-card">
            <h2 class="text-center mb-4">üìö Summary: Historical Thinking Skills Applied</h2>
            
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="summary-item">
                        <h4>üîÑ Change & Continuity</h4>
                        <p><strong>Changed:</strong> Federalist Party died, territory doubled, D-Rs dominated politics</p>
                        <p><strong>Continued:</strong> Debates over federal power, economic policy disagreements, Constitutional interpretation battles</p>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="summary-item">
                        <h4>‚õìÔ∏è Cause & Effect</h4>
                        <p>British Impressment ‚Üí Embargo Act ‚Üí Economic Depression ‚Üí War of 1812 ‚Üí Hartford Convention ‚Üí End of Federalists ‚Üí Era of Good Feelings</p>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="summary-item">
                        <h4>‚öñÔ∏è Compare & Contrast</h4>
                        <p><strong>Federalists:</strong> Strong federal govt, loose Constitution, pro-tariff, pro-British</p>
                        <p><strong>Democratic-Republicans:</strong> States' rights, strict Constitution, anti-tariff, neutral foreign policy</p>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="summary-item">
                        <h4>üåç Contextualization</h4>
                        <p>Napoleonic Wars shaped American foreign policy. Haiti's revolution influenced American views on race and slavery. Latin American independence inspired Monroe Doctrine.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-5">
            <a href="/" class="btn btn-custom btn-lg me-2">‚Üê Back to Home</a>
            <a href="/quiz" class="btn btn-outline-primary btn-lg">Test Your Knowledge ‚Üí</a>
        </div>
    </div>
</section>

<style>
/* Skill Navigation Cards */
.skill-nav-card {
    display: block;
    background: white;
    border: 3px solid var(--sepia);
    border-radius: 15px;
    padding: 1.5rem;
    text-align: center;
    text-decoration: none;
    color: inherit;
    transition: all 0.3s ease;
    height: 100%;
}

.skill-nav-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    border-color: #d4af37;
}

.skill-icon {
    font-size: 3rem;
    margin-bottom: 0.5rem;
}

.skill-nav-card h4 {
    font-family: var(--font-display);
    color: var(--sepia);
    margin-bottom: 0.5rem;
}

/* Skill Headers */
.skill-header {
    text-align: center;
    margin-bottom: 3rem;
}

.skill-header h2 {
    font-family: var(--font-display);
    color: var(--sepia);
    font-weight: 700;
    margin-bottom: 1rem;
}

/* Interactive Modules */
.interactive-module {
    background: white;
    border: 3px solid var(--sepia);
    border-radius: 15px;
    padding: 2rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* Change & Continuity Boxes */
.year-slider-container {
    background: #f8f9fa;
    padding: 2rem;
    border-radius: 10px;
    margin-bottom: 2rem;
}

.change-box {
    border-radius: 10px;
    padding: 1.5rem;
    min-height: 250px;
}

.change-box.changed {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
}

.change-box.continued {
    background: linear-gradient(135deg, #3b82f6, #2563eb);
    color: white;
}

.change-box h4 {
    border-bottom: 2px solid rgba(255,255,255,0.3);
    padding-bottom: 0.5rem;
    margin-bottom: 1rem;
}

.change-box ul {
    list-style: none;
    padding: 0;
}

.change-box li {
    padding: 0.5rem 0;
    border-bottom: 1px solid rgba(255,255,255,0.2);
}

/* Analysis Box */
.analysis-box {
    background: #f8f9fa;
    border-left: 5px solid #d4af37;
    padding: 1.5rem;
    border-radius: 5px;
}

.analysis-box h4 {
    color: var(--sepia);
    margin-bottom: 1rem;
}

/* Chain Display */
.chain-display {
    background: #f8f9fa;
    border: 3px dashed var(--sepia);
    border-radius: 10px;
    padding: 2rem;
    min-height: 150px;
    margin-bottom: 2rem;
}

.chain-start {
    display: inline-block;
    background: linear-gradient(135deg, #d4af37, #f7dc6f);
    color: #000;
    padding: 1rem 1.5rem;
    border-radius: 10px;
    font-weight: 700;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.chain-item {
    display: inline-block;
    background: white;
    border: 2px solid var(--sepia);
    padding: 1rem 1.5rem;
    border-radius: 10px;
    margin: 0.5rem;
    font-weight: 600;
    position: relative;
}

.chain-item.correct {
    background: #10b981;
    color: white;
    border-color: #059669;
}

.chain-item.incorrect {
    background: #ef4444;
    color: white;
    border-color: #dc2626;
}

.chain-item::before {
    content: '‚Üí';
    position: absolute;
    left: -30px;
    font-size: 1.5rem;
    color: var(--sepia);
}

/* Event Bank */
.event-bank {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 10px;
}

.event-card {
    background: white;
    border: 2px solid var(--sepia);
    padding: 1rem;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    font-weight: 600;
    font-size: 0.9rem;
}

.event-card:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    border-color: #d4af37;
}

.event-card.used {
    opacity: 0.3;
    cursor: not-allowed;
}

/* Venn Diagram */
.venn-container {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 400px;
    background: #f8f9fa;
    border-radius: 15px;
    padding: 2rem;
}

.venn-circle {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    position: relative;
}

.federalist-circle {
    background: rgba(30, 58, 138, 0.2);
    border: 3px solid var(--federalist-primary);
}

.democratic-circle {
    background: rgba(153, 27, 27, 0.2);
    border: 3px solid var(--democratic-primary);
}

.venn-overlap {
    width: 200px;
    height: 300px;
    background: rgba(212, 175, 55, 0.2);
    border: 3px solid #d4af37;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    margin: 0 -50px;
    z-index: 2;
    border-radius: 20px;
}

.drop-zone {
    width: 100%;
    min-height: 150px;
    background: rgba(255,255,255,0.5);
    border: 2px dashed rgba(0,0,0,0.2);
    border-radius: 10px;
    padding: 0.5rem;
    margin-top: 1rem;
}

/* Term Cards */
.term-cards-container {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 10px;
}

.term-card {
    background: white;
    border: 2px solid var(--sepia);
    padding: 0.8rem;
    border-radius: 8px;
    cursor: move;
    text-align: center;
    font-weight: 600;
    transition: all 0.3s ease;
}

.term-card:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.term-card.placed {
    opacity: 0.5;
}

/* Dual Timeline */
.dual-timeline {
    background: white;
    border: 3px solid var(--sepia);
    border-radius: 15px;
    padding: 2rem;
}

.timeline-row {
    margin-bottom: 2rem;
}

.timeline-row h4 {
    font-family: var(--font-display);
    margin-bottom: 1rem;
    color: var(--sepia);
}

.timeline-events {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
}

.timeline-event {
    background: white;
    border: 2px solid var(--sepia);
    padding: 1rem;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    flex: 1 1 200px;
}

.timeline-event:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    border-color: #d4af37;
}

.timeline-event.selected {
    background: #d4af37;
    color: white;
    border-color: #d4af37;
}

.timeline-event .year {
    font-weight: 700;
    font-size: 1.2rem;
    color: #d4af37;
}

.timeline-event.selected .year {
    color: white;
}

.timeline-connector {
    text-align: center;
    font-size: 2rem;
    margin: 1rem 0;
    color: var(--sepia);
}

.timeline-connector::before {
    content: '‚ÜïÔ∏è Connections ‚ÜïÔ∏è';
}

/* Summary Card */
.summary-card {
    background: white;
    border: 4px solid #d4af37;
    border-radius: 20px;
    padding: 3rem 2rem;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
}

.summary-item {
    background: #f8f9fa;
    border-left: 5px solid #d4af37;
    padding: 1.5rem;
    border-radius: 5px;
    height: 100%;
}

.summary-item h4 {
    color: var(--sepia);
    margin-bottom: 1rem;
}

.summary-item p {
    margin-bottom: 0.5rem;
}

/* Responsive */
@media (max-width: 768px) {
    .venn-container {
        flex-direction: column;
    }
    
    .venn-overlap {
        margin: -30px 0;
    }
    
    .timeline-event {
        flex: 1 1 100%;
    }
}
</style>

{% block extra_js %}
<script src="{{ url_for('static', filename='js/historical-thinking.js') }}"></script>
{% endblock %}

{% endblock %}
